(this.webpackJsonpFbAPIConnect=this.webpackJsonpFbAPIConnect||[]).push([[0],{60:function(e,t,a){e.exports=a(91)},65:function(e,t,a){},89:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),s=a.n(c),l=(a(65),a(6)),o=a(11),i=a(7),u=a(56),m=a(58),d=a(30),b=a(38),p=a(57),f=a(43);function E(){var e=Object(n.useContext)(B),t=e.error,a=e.token,c=Object(l.a)(t,2),s=c[0],o=c[1],i=Object(l.a)(a,1)[0];return r.a.createElement(p.a,{show:s,onHide:function(){return o(!1)},backdrop:"static",keyboard:!1},r.a.createElement(f.a,{className:"mb-0",variant:"danger",onClose:function(){return o(!1)},dismissible:!0},r.a.createElement(f.a.Heading,null,"Oh snap!"),i?r.a.createElement("p",null,"Please verify your input or refresh the application"):r.a.createElement("p",null,"Please authenticate with your Facebook account to continue")))}var v=a(59),g=a(55),h=a(94),O=a(29);function j(e){var t=e.columns,a=e.data,c=Object(n.useMemo)((function(){return{text:function(e,t,a){return e.filter((function(e){var n=e.values[t];return void 0===n||String(n).toLowerCase().startsWith(String(a).toLowerCase())}))}}}),[]),s=Object(n.useMemo)((function(){return{Filter:l}}),[]);function l(e){var t=e.column,a=t.filterValue,c=t.setFilter,s=t.preFilteredRows,l=t.id,o=Object(n.useMemo)((function(){var e=new Set;return s.forEach((function(t){e.add(t.values[l])})),Object(v.a)(e.values())}),[l,s]);return r.a.createElement("select",{value:a,onChange:function(e){c(e.target.value||void 0)}},r.a.createElement("option",{value:""},"All"),o.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))}var o=Object(O.useTable)({columns:t,data:a,defaultColumn:s,filterTypes:c},O.useFilters,O.useGlobalFilter,O.useSortBy),i=o.getTableProps,u=o.getTableBodyProps,m=o.headerGroups,d=o.rows,b=o.prepareRow;return a.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,Object.assign({responsive:!0,striped:!0,bordered:!0,hover:!0,variant:"dark"},i()),r.a.createElement("thead",null,m.map((function(e){return r.a.createElement("tr",Object.assign({key:Object(h.a)()},e.getHeaderGroupProps()),e.headers.map((function(e){return r.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),r.a.createElement("div",null,e.canFilter?e.render("Filter"):null),r.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""))})))}))),r.a.createElement("tbody",u(),d.map((function(e){return b(e),r.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return r.a.createElement("td",e.getCellProps(),e.render("Cell"))})))}))))):null}var S=a(24),F=a.n(S),k=a(44),w=a(25),y=a(45),C=a(28),H=a.n(C);function _(e){var t=e.variant,a=e.dataType,c=e.searchFields,s=e.dataSetter,u=e.labelSetter,m=e.selectOptions,d=Object(n.useState)(void 0),p=Object(l.a)(d,2),f=p[0],E=p[1],v=Object(n.useState)(!1),g=Object(l.a)(v,2),h=g[0],O=g[1],j=Object(n.useContext)(B),S=j.error,C=j.token,_=Object(l.a)(S,2)[1],I=Object(l.a)(C,1)[0],x={interests:"https://graph.facebook.com/search?type=adinterest&q=[".concat(f,"]&limit=10000&locale=en_US&access_token=").concat(I),images:"https://graph.facebook.com/v8.0/".concat(f,"/adimages?fields=").concat(c,"&limit=1000&access_token=").concat(I),campaigns:"https://graph.facebook.com/v8.0/".concat(f,"/campaigns?fields=").concat(c,"&limit=1000&access_token=").concat(I)},N=function(){var e=Object(k.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.t0=s,e.next=4,T();case 4:e.t1=e.sent,(0,e.t0)(e.t1),E(""),"interests"===a&&u(f);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(k.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.a.get(x[a]);case 3:return(t=e.sent).data.data.length||O(!0),e.abrupt("return",t.data.data);case 8:e.prev=8,e.t0=e.catch(0),_(!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{className:"mt-3"},r.a.createElement(i.a,{md:"4",xs:"12"},r.a.createElement(w.a,{onSubmit:N},r.a.createElement(w.a.Row,{className:"align-items-center"},r.a.createElement(i.a,null,r.a.createElement(w.a.Label,{srOnly:!0}),"select"===t?r.a.createElement(w.a.Control,{className:"mb-2",as:"select",placeholder:"Ad Account ID",name:"adAccount",value:f,onChange:function(e){E(e.target.value);var t=e.nativeEvent.target.selectedIndex;u(e.nativeEvent.target[t].text),s(void 0)}},r.a.createElement("option",{hidden:!0},"Select Ad Account"),m&&m.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))):r.a.createElement(w.a.Control,{className:"mb-2",type:"text",placeholder:"Ad Interest",name:"interest",value:f||"",onChange:function(e){E(e.target.value),s(void 0)}})),r.a.createElement(i.a,{xs:"auto"},r.a.createElement(y.a,{disabled:!f,type:"submit",className:"mb-2"},"Get Data")),r.a.createElement(i.a,{xs:"auto"},r.a.createElement(y.a,{variant:"danger",className:"mb-2",onClick:function(){_(!1),s([]),O(!1)}},"Clear")),h&&r.a.createElement(i.a,null,r.a.createElement("h4",null,r.a.createElement(b.a,{display:!1,variant:"danger"},"No Results"))))))))}function I(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useMemo)((function(){return(e=a)&&e.map((function(e){return{interests:'"interests":[{"id":"'.concat(e.id,'","name":"').concat(e.name,'"}]}'),name:e.name,audience:e.audience_size}}));var e}),[a]),u=Object(n.useState)("Images"),m=Object(l.a)(u,2),d=m[0],b=m[1],p=Object(n.useMemo)((function(){return[{Header:"Showing results for interest: ".concat(d),columns:[{Header:"ID/Name",accessor:"interests",disableFilters:!0},{Header:"Name",accessor:"name",disableFilters:!0},{Header:"Audience",accessor:"audience",disableFilters:!0}]}]}),[d]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{dataType:"interests",dataSetter:c,labelSetter:b}),r.a.createElement(o.a,null,r.a.createElement(i.a,null,a&&r.a.createElement(j,{columns:p,data:s}))))}function x(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)("Images"),m=Object(l.a)(u,2),d=m[0],b=m[1],p=Object(n.useMemo)((function(){return[{Header:d,columns:[{Header:"Image Name",accessor:"name",disableFilters:!0},{Header:"Hash",accessor:"hash",disableFilters:!0},{Header:"ID (Account + Hash)",accessor:"id",disableFilters:!0}]}]}),[d]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{searchFields:"name,id,hash",dataType:"images",variant:"select",dataSetter:s,labelSetter:b,selectOptions:e.selectOptions}),r.a.createElement(o.a,null,r.a.createElement(i.a,null,c&&r.a.createElement(j,{columns:p,data:c}))))}function N(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)("Images"),m=Object(l.a)(u,2),d=m[0],b=m[1],p=Object(n.useMemo)((function(){return[{Header:d,columns:[{Header:"ID (Account + Hash)",accessor:"id",disableFilters:!0},{Header:"URL",accessor:function(e){return r.a.createElement("a",{href:e.url},"Download")},disableFilters:!0},{Header:"Currently in use?",accessor:function(e){return e.is_associated_creatives_in_adgroups.toString()}},{Header:"Created Time",accessor:"created_time"}]}]}),[d]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{searchFields:"id,name,url,is_associated_creatives_in_adgroups,created_time,updated_time",dataType:"images",variant:"select",dataSetter:s,labelSetter:b,selectOptions:e.selectOptions}),r.a.createElement(o.a,null,r.a.createElement(i.a,null,c&&r.a.createElement(j,{columns:p,data:c}))))}function T(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],s=a[1],u=Object(n.useState)("Campaigns"),m=Object(l.a)(u,2),d=m[0],b=m[1],p=Object(n.useMemo)((function(){return[{Header:d,columns:[{Header:"Campaign Name",accessor:"name",disableFilters:!0},{Header:"Campaign ID",accessor:"id",disableFilters:!0},{Header:"Status",accessor:"status",disableFilters:!0}]}]}),[d]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{searchFields:"status,name",dataType:"campaigns",variant:"select",dataSetter:s,labelSetter:b,selectOptions:e.selectOptions}),r.a.createElement(o.a,null,r.a.createElement(i.a,null,c&&r.a.createElement(j,{columns:p,data:c}))))}function A(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(void 0),p=Object(l.a)(s,2),f=p[0],v=p[1],g=Object(n.useState)(void 0),h=Object(l.a)(g,2),O=h[0],j=h[1],S=Object(n.useContext)(B),F=S.error,k=S.token,w=Object(l.a)(F,2)[1],y=Object(l.a)(k,2),C=y[0],_=y[1];return Object(n.useEffect)((function(){window.fbAsyncInit=function(){window.FB.init({appId:"1045150769237017",cookie:!0,xfbml:!0,version:"v8.0"}),window.FB.AppEvents.logPageView(),window.FB.getLoginStatus((function(e){"connected"!==e.status?(c(!0),window.FB.XFBML.parse()):(c(!1),_(e.authResponse.accessToken))}))},function(e,t,a){var n,r=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(n,r))}(document,"script","facebook-jssdk")}),[_]),Object(n.useEffect)((function(){C&&H.a.get("https://graph.facebook.com/v8.0/me?fields=businesses&access_token=".concat(C)).then((function(e){v(e.data.businesses.data[0].id)})).catch((function(e){console.log(e),w(!0)}))}),[C,w]),Object(n.useEffect)((function(){f&&H.a.get("https://graph.facebook.com/v8.0/".concat(f,"/owned_ad_accounts?fields=name&limit=500&access_token=").concat(C)).then((function(e){j(e.data.data.sort((function(e,t){return e.id>t.id?1:-1})))})).catch((function(e){console.log(e),w(!0)}))}),[f,C,w]),r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{fluid:!0,className:"mt-3"},r.a.createElement(o.a,{className:"mb-3"},r.a.createElement(i.a,{xs:{span:4,offset:8}},a?r.a.createElement("div",{className:"fb-login-button","data-size":"small","data-button-type":"login_with","data-layout":"rounded","data-auto-logout-link":"false","data-use-continue-as":"false","data-width":""}):r.a.createElement(b.a,{variant:"success"},"Connected to FB"))),r.a.createElement(m.a,{transition:!1},r.a.createElement(d.a,{eventKey:"interests",title:"Interest Finder"},r.a.createElement(I,{accessToken:C})),r.a.createElement(d.a,{eventKey:"images",title:"Image Finder"},r.a.createElement(x,{accessToken:C,selectOptions:O})),r.a.createElement(d.a,{eventKey:"used",title:"Assets in Use"},r.a.createElement(N,{accessToken:C,selectOptions:O})),r.a.createElement(d.a,{eventKey:"campaigns",title:"Campaigns"},r.a.createElement(T,{accessToken:C,selectOptions:O})))),r.a.createElement(E,null))}a(89),a(90);var B=Object(n.createContext)(),P=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(l.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(null),u=Object(l.a)(i,2),m={error:[s,o],token:[u[0],u[1]]};return r.a.createElement(B.Provider,{value:m},t)};var M=function(){return r.a.createElement(P,null,r.a.createElement("div",{className:"App"},r.a.createElement(A,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.19509bf9.chunk.js.map