(this.webpackJsonpFbAPIConnect=this.webpackJsonpFbAPIConnect||[]).push([[0],{167:function(e,t,a){},170:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(18),s=a.n(r),o=(a(90),a(6)),l=a(15),i=a(9),u=a(80),d=a(82),m=a(38),p=a(49),f=a(81),b=a(61);function v(){var e=Object(n.useContext)(M),t=e.error,a=e.token,r=Object(o.a)(t,2),s=r[0],l=r[1],i=Object(o.a)(a,1)[0];return c.a.createElement(f.a,{show:s,onHide:function(){return l(!1)},backdrop:"static",keyboard:!1},c.a.createElement(b.a,{className:"mb-0",variant:"danger",onClose:function(){return l(!1)},dismissible:!0},c.a.createElement(b.a.Heading,null,"Oh snap!"),i?c.a.createElement("p",null,"Please verify your input or refresh the application"):c.a.createElement("p",null,"Please authenticate with your Facebook account to continue")))}var E=a(79),g=a.n(E);function O(e){var t=e.columns,a=e.data,n=e.sort,r=e.caption,s=e.filter,o=e.cellEdit,l=e.rowClasses;return a.length?c.a.createElement(g.a,{bootstrap4:!0,keyField:"id",data:a,columns:t,caption:r,defaultSorted:n,id:"tableDark",filter:s,cellEdit:o,rowClasses:l}):null}var h=a(28),j=a.n(h),S=a(54),k=a(32),F=a(37),w=a(31),x=a.n(w);function y(e){var t=e.variant,a=e.dataType,r=e.searchFields,s=e.dataSetter,u=e.labelSetter,d=e.selectOptions,m=e.savingRoutes,f=e.savedStatus,b=e.setSavedStatus,v=e.setEditedRow,E=Object(n.useState)(void 0),g=Object(o.a)(E,2),O=g[0],h=g[1],w=Object(n.useState)(!1),y=Object(o.a)(w,2),C=y[0],_=y[1],I=Object(n.useContext)(M),N=I.error,A=I.token,T=Object(o.a)(N,2)[1],D=Object(o.a)(A,1)[0],B=Object(n.useMemo)((function(){return function(e,t){return e&&e.map((function(e){return"https://graph.facebook.com/v8.0/".concat(e.id,"?status=").concat(e.status,"&access_token=").concat(t)}))}(m,D)}),[m,D]),P={interests:"https://graph.facebook.com/search?type=adinterest&q=[".concat(O,"]&limit=10000&locale=en_US&access_token=").concat(D),images:"https://graph.facebook.com/v8.0/".concat(O,"/adimages?fields=").concat(r,"&limit=1000&access_token=").concat(D),campaigns:"https://graph.facebook.com/v8.0/".concat(O,"/campaigns?fields=").concat(r,"&limit=1000&access_token=").concat(D)},R=function(){var e=Object(S.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.t0=s,e.next=4,U();case 4:e.t1=e.sent,(0,e.t0)(e.t1),h(""),"interests"===a&&u(O);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(S.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get(P[a]);case 3:return(t=e.sent).data.data.length?_(!1):_(!0),e.abrupt("return",t.data.data);case 8:e.prev=8,e.t0=e.catch(0),T(!0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(S.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),T(!0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),L=function(e){e&&e.forEach((function(e){return H(e)}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a,{className:"mt-3"},c.a.createElement(i.a,{xs:"12"},c.a.createElement(k.a,{onSubmit:R},c.a.createElement(k.a.Row,{className:"align-items-center"},c.a.createElement(i.a,{md:"4",xs:"auto"},c.a.createElement(k.a.Label,{srOnly:!0}),"select"===t?c.a.createElement(k.a.Control,{className:"mb-2",as:"select",placeholder:"Ad Account ID",name:"adAccount",value:O,onChange:function(e){h(e.target.value);var t=e.nativeEvent.target.selectedIndex;u(e.nativeEvent.target[t].text),s(void 0),v([]),b(!1)}},c.a.createElement("option",{hidden:!0},"Select Ad Account"),d&&d.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)}))):c.a.createElement(k.a.Control,{className:"mb-2",type:"text",placeholder:"Ad Interest",name:"interest",value:O||"",onChange:function(e){h(e.target.value),s(void 0)}})),c.a.createElement(i.a,{xs:"auto"},c.a.createElement(F.a,{disabled:!O,type:"submit",className:"mb-2"},"Get Data")),c.a.createElement(i.a,{xs:"auto"},c.a.createElement(F.a,{variant:"danger",className:"mb-2",onClick:function(){T(!1),s([]),_(!1),v([]),b(!1)}},"Clear")),C&&c.a.createElement(i.a,{xs:"auto"},c.a.createElement("h4",null,c.a.createElement(p.a,{variant:"danger"},"No Results"))),B&&B.length?c.a.createElement(i.a,{xs:"auto",lg:{span:"auto",offset:"5"}},f?c.a.createElement(F.a,{variant:"success",className:"mb-2"},"Saved!"):c.a.createElement(F.a,{variant:"info",className:"mb-2",onClick:function(){L(B),b(!0)}},"Save")):null)))))}function C(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useMemo)((function(){return(e=a)&&e.map((function(e){return{interests:'"interests":[{"id":"'.concat(e.id,'","name":"').concat(e.name,'"}]}'),name:e.name,audience:e.audience_size,id:e.id}}));var e}),[a]),u=Object(n.useState)("Images"),d=Object(o.a)(u,2),m=d[0],p=d[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{dataType:"interests",dataSetter:r,labelSetter:p}),c.a.createElement(l.a,null,c.a.createElement(i.a,null,a&&c.a.createElement(O,{columns:[{text:"ID/Name",dataField:"interests",sort:!0},{text:"Name",dataField:"name",sort:!0},{text:"Audience",dataField:"audience",sort:!0}],data:s,sort:[{dataField:"audience",order:"desc"}],caption:"Displaying results of: ".concat(m)}))))}function _(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],s=a[1],u=Object(n.useState)("Images"),d=Object(o.a)(u,2),m=d[0],p=d[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{searchFields:"name,id,hash",dataType:"images",variant:"select",dataSetter:s,labelSetter:p,selectOptions:e.selectOptions}),c.a.createElement(l.a,null,c.a.createElement(i.a,null,r&&c.a.createElement(O,{columns:[{text:"Image Name",dataField:"name",sort:!0},{text:"Hash",dataField:"hash",sort:!0},{text:"ID (Account + Hash)",dataField:"id",sort:!0}],data:r,sort:[{dataField:"name",order:"desc"}],caption:"Displaying results for: ".concat(m)}))))}var I=a(62),N=a.n(I);function A(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],s=a[1],u=Object(n.useMemo)((function(){return(e=r)&&e.map((function(e){return{url:c.a.createElement("a",{href:e.url},"Download"),name:e.name,use:e.is_associated_creatives_in_adgroups.toString(),id:e.id,created_time:e.created_time}}));var e}),[r]),d=Object(n.useState)("Images"),m=Object(o.a)(d,2),p=m[0],f=m[1],b={true:"true",false:"false"},v=[{text:"ID (Account + Hash)",dataField:"id",sort:!0},{text:"URL",dataField:"url",sort:!0},{text:"Currently in use?",dataField:"use",sort:!0,formatter:function(e){return b[e]},filter:Object(I.selectFilter)({options:b})},{text:"Created Time",dataField:"created_time",sort:!0}];return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{searchFields:"id,name,url,is_associated_creatives_in_adgroups,created_time,updated_time",dataType:"images",variant:"select",dataSetter:s,labelSetter:f,selectOptions:e.selectOptions}),c.a.createElement(l.a,null,c.a.createElement(i.a,null,r&&c.a.createElement(O,{columns:v,data:u,sort:[{dataField:"use",order:"desc"}],caption:"Displaying results for: ".concat(p),filter:N()()}))))}var T=a(83),D=a(63),B=a.n(D);function P(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],s=a[1],u=Object(n.useState)("Campaigns"),d=Object(o.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)([]),b=Object(o.a)(f,2),v=b[0],E=b[1],g=Object(n.useMemo)((function(){return(e=v)&&e.map((function(e){return e.id}));var e}),[v]),h=Object(n.useState)(!1),j=Object(o.a)(h,2),S=j[0],k=j[1],F=[{text:"Campaign Name",dataField:"name",sort:!0},{text:"Campaign ID",dataField:"id",sort:!0},{text:"Status",dataField:"status",sort:!0,editor:{type:D.Type.SELECT,options:[{value:"ACTIVE",label:"ACTIVE"},{value:"PAUSED",label:"PAUSED"}]}}],w=B()({mode:"dbclick",blurToSave:!0,afterSaveCell:function(e,t,a,n){e!==t&&E([].concat(Object(T.a)(v),[{id:a.id,status:t}]))}});return c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{searchFields:"status,name",dataType:"campaigns",variant:"select",dataSetter:s,labelSetter:p,selectOptions:e.selectOptions,savingRoutes:v,setSavedStatus:k,savedStatus:S,setEditedRow:E}),c.a.createElement(l.a,null,c.a.createElement(i.a,null,r&&c.a.createElement(O,{columns:F,data:r,sort:[{dataField:"id",order:"asc"}],caption:"Displaying results for: ".concat(m),cellEdit:w,rowClasses:function(e){var t=null;return-1!==g.indexOf(e.id)&&(t="editedCell",S&&(t="savedCell")),t}}))))}function R(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(void 0),f=Object(o.a)(s,2),b=f[0],E=f[1],g=Object(n.useState)(void 0),O=Object(o.a)(g,2),h=O[0],j=O[1],S=Object(n.useContext)(M),k=S.error,F=S.token,w=Object(o.a)(k,2)[1],y=Object(o.a)(F,2),I=y[0],N=y[1];return Object(n.useEffect)((function(){window.fbAsyncInit=function(){window.FB.init({appId:"1045150769237017",cookie:!0,xfbml:!0,version:"v8.0"}),window.FB.AppEvents.logPageView(),window.FB.getLoginStatus((function(e){"connected"!==e.status?(r(!0),window.FB.XFBML.parse()):(r(!1),N(e.authResponse.accessToken))}))},function(e,t,a){var n,c=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",c.parentNode.insertBefore(n,c))}(document,"script","facebook-jssdk")}),[N]),Object(n.useEffect)((function(){I&&x.a.get("https://graph.facebook.com/v8.0/me?fields=businesses&access_token=".concat(I)).then((function(e){E(e.data.businesses.data[0].id)})).catch((function(e){console.log(e),w(!0)}))}),[I,w]),Object(n.useEffect)((function(){b&&x.a.get("https://graph.facebook.com/v8.0/".concat(b,"/owned_ad_accounts?fields=name&limit=500&access_token=").concat(I)).then((function(e){j(e.data.data.sort((function(e,t){return e.id>t.id?1:-1})))})).catch((function(e){console.log(e),w(!0)}))}),[b,I,w]),c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{fluid:!0,className:"mt-3"},c.a.createElement(l.a,{className:"mb-3"},c.a.createElement(i.a,{xs:{span:4,offset:8}},a?c.a.createElement("div",{className:"fb-login-button","data-size":"small","data-button-type":"login_with","data-layout":"rounded","data-auto-logout-link":"false","data-use-continue-as":"false","data-width":""}):c.a.createElement(p.a,{variant:"success"},"Connected to FB"))),c.a.createElement(d.a,{transition:!1},c.a.createElement(m.a,{eventKey:"interests",title:"Interest Finder"},c.a.createElement(C,{accessToken:I})),c.a.createElement(m.a,{eventKey:"images",title:"Image Finder"},c.a.createElement(_,{accessToken:I,selectOptions:h})),c.a.createElement(m.a,{eventKey:"used",title:"Assets in Use"},c.a.createElement(A,{accessToken:I,selectOptions:h})),c.a.createElement(m.a,{eventKey:"campaigns",title:"Campaigns"},c.a.createElement(P,{accessToken:I,selectOptions:h})))),c.a.createElement(v,null))}a(167),a(168),a(169);var M=Object(n.createContext)(),U=function(e){var t=e.children,a=Object(n.useState)(!1),r=Object(o.a)(a,2),s=r[0],l=r[1],i=Object(n.useState)(null),u=Object(o.a)(i,2),d={error:[s,l],token:[u[0],u[1]]};return c.a.createElement(M.Provider,{value:d},t)};var H=function(){return c.a.createElement(U,null,c.a.createElement("div",{className:"App"},c.a.createElement(R,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,a){e.exports=a(170)},90:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.3df68ccb.chunk.js.map